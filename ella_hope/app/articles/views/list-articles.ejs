<% var model = this.model; %>

<table class="table table-striped">
	<thead>
		<tr>
			<th>&nbsp;</th>
			<th><%= $.t('Title') %></th>
			<th><%= $.t('Photo') %></th>
			<th><%= $.t('Category') %></th>
			<th><%= $.t('Publish from') %></th>
			<th><%= $.t('State') %></th>
			<th><%= $.t('Actions') %></th>
		</tr>
	</thead>
	<tbody>
		<% list(this.articles, function( article ) { %>
			<%
				if (model === 'articles') {
					var editUrl = can.route.url({ page: 'articles', action: 'edit', id: article.id });
					var deleteUrl = can.route.url({ page: 'articles', action: 'delete', id: article.id });
				}
				else if (model === 'galleries') {
					var editUrl = can.route.url({ page: 'galleries', action: 'edit', id: article.id });
					var deleteUrl = can.route.url({ page: 'galleries', action: 'delete', id: article.id });
				}

			var timestamp = Date.parse(article.publish_from);
			var articleDate = timestamp.toString('yyyy-MM-dd');
			var articleTime = timestamp.toString('HH:mm');
			%>
			<tr>
				<td class="article-state <%= article.state %>" title="<%= article.state %>">&nbsp;</td>
				<td><a href="<%== editUrl %>"><%= article.title %></a></td>
				<td>
					<% if (article.photo && article.photo.public_url) { %>
						<img src="<%= article.photo.public_url %>" height="40" />
					<% } %>
				</td>
				<td><%= article.category.title %></td>
				<td><%= articleDate %> <%= articleTime %></td>
				<td><%= article.state %></td>
				<td>
					<!-- Edit -->
					<a <%= (el) -> el.data( 'article', article ) %> href="<%= editUrl %>" class="btn btn-mini edit-article">
						<%= $.t('Edit');%> <i class="icon-pencil"></i>
					</a>

					<!-- Delete -->
					<a <%= (el) -> el.data( 'article', article ) %> href="javascript://" class="btn btn-mini btn-danger delete" data-confirm="<%= $.t('Are you sure you want to delete the article?') %>">
						<%= $.t('Delete');%> <i class="icon-trash icon-white"></i>
					</a>
				</td>
			</tr>
		<% } ) %>
	</tbody>
</table>
