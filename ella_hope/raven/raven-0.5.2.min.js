// parseUri 1.2.2
// (c) Steven Levithan <stevenlevithan.com>
// MIT License
function parseUri(e){var t=parseUri.options,n=t.parser[t.strictMode?"strict":"loose"].exec(e),r={},i=14;while(i--)r[t.key[i]]=n[i]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,function(e,n,i){n&&(r[t.q.name][n]=i)}),r}parseUri.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},function(){var e=this,t;e.Raven=t={};var n=t;t.VERSION="0.5.2";var r=e.jQuery||e.Zepto||e.ender;t.loaded=!1,t.options={secretKey:undefined,publicKey:undefined,servers:[],projectId:1,logger:"javascript",site:undefined,signatureUrl:undefined,fetchHeaders:!1,testMode:!1,ignoreErrors:[]},t.funcNameRE=/function\s*([\w\-$]+)?\s*\(/i,t.config=function(e){var i=[];if(typeof e=="string"){if(e.indexOf("http")!==0)throw"Base64 encoded config is no longer supported - use DSN";e=t.parseDSN(e)}r.each(e,function(e,t){n.options[e]=t}),r.each(n.options.servers,function(e,t){t.slice(-1)!=="/"&&(t+="/"),i.push(t+"api/"+n.options.projectId+"/store/")}),n.options.servers=i},t.parseDSN=function(e){var t=parseUri(e),n=t.path.lastIndexOf("/"),r,i;return n===-1?(r=t.path.substr(1),i=""):(i=t.path.substr(1,n),r=t.path.substr(n+1)),{servers:[t.protocol+"://"+t.host+":"+t.port+"/"+i],publicKey:t.user,secretKey:t.password,projectId:r}},t.getHeaders=function(){var t={};return n.options.fetchHeaders&&(t=r.ajax({type:"HEAD",url:e.location,async:!1}).getAllResponseHeaders()),t.Referer=document.referrer,t["User-Agent"]=navigator.userAgent,t},t.parseHeaders=function(e){var t={};return r.each(e.split("\n"),function(e,n){var r=n.slice(0,n.indexOf(":")),i=n.slice(n.indexOf(":")+2);t[r]=i}),t},t.getSignature=function(e,t,i){n.options.signatureUrl?r.post(n.options.signatureUrl,{message:e,timestamp:t},function(e){i(e.signature)}):i()},t.getAuthHeader=function(e,t){var r="Sentry sentry_version=2.0, ";return r+="sentry_timestamp="+t+", ",r+="sentry_client=raven-js/"+n.VERSION,n.options.publicKey&&(r+=", sentry_key="+n.options.publicKey),e&&(r+=", sentry_signature="+e),r},t.captureException=function(e){var t,r,i;e.line?t=e.line:e.lineNumber&&(t=e.lineNumber),e.sourceURL?i=e.sourceURL:e.fileName&&(i=e.fileName),e.arguments&&e.stack?r=this.chromeTraceback(e):e.stack?e.stack.indexOf("@")==-1?r=this.chromeTraceback(e):r=this.firefoxTraceback(e):(r=[{filename:i,lineno:t}],r=r.concat(this.otherTraceback(arguments.callee))),n.process(e,i,t,r)},t.captureMessage=function(e){n.process(e)},t.trimString=function(e){return e.replace(/^\s+|\s+$/g,"")},t.chromeTraceback=function(e){var n,i,s,o,u=[],a=e.stack.split("\n");return r.each(a.slice(1),function(e,r){n=t.trimString(r).slice(3);if(n=="unknown source")return;n=n.split(" "),n.length>2?(i=n[0],s=n.slice(1).join(" "),o="(unknown)"):n.length==2?(i=n[0],s=n[1]):(i="(unknown)",s=n[0]),s&&s!="(unknown source)"&&(s.slice(0,1)=="("?s=s.slice(1,-1).split(":"):s=s.split(":"),o=s.slice(-2)[0],s=s.slice(0,-2).join(":")),u.push({"function":i,filename:s,lineno:o})}),u},t.firefoxTraceback=function(e){var t,n,i,s,o,u=[],a=e.stack.split("\n");return r.each(a,function(e,r){r&&(t=r.split("@"),t[0]?(n=t[0].split("("),n[1]!=")"?i=n[1].slice(0,-1).split(","):i=undefined,n[0]?n=n[0]:n="(unknown)"):n="(unknown)",s=t[1].split(":"),o=s.slice(-1)[0],s=s.slice(0,-1).join(":"),u.push({"function":n,filename:s,lineno:o,vars:{arguments:i}}))}),u},t.otherTraceback=function(e){var t,n,r="<anonymous>",i=[],s=9;while(e&&i.length<s)t=e.name||(this.funcNameRE.test(e.toString())?RegExp.$1||r:r),e.arguments?n=this.stringifyArguments(e.arguments):n=undefined,i.push({filename:"(unknown source)",lineno:"(unknown)","function":t,post_context:e.toString().split("\n"),vars:{arguments:n}}),e=e.caller;return i},t.stringifyArguments=function(e){var t,n=this,i="<unknown>",s=[];return r.each(e,function(e,r){r===undefined?s.push("undefined"):r===null?s.push("null"):r instanceof Array?s.push(n.stringifyArguments(r)):r.constructor?(t=r.constructor.name||(n.funcNameRE.test(r.constructor.toString())?RegExp.$1||i:i),t=="String"?s.push('"'+r+'"'):t=="Number"||t=="Date"?s.push(r):t=="Boolean"?s.push(r?"true":"false"):s.push(t)):s.push(i)}),s},t.process=function(t,i,s,o,u){var a,f,l,c,h,p=e.location.origin+e.location.pathname,d=e.location.search.slice(1);typeof t=="object"&&(h=t.name,t=t.message);if(r.inArray(t,n.options.ignoreErrors)>=0)return;a=s?t+" at "+s:t,o?(f={frames:o},i=i||o[0].filename):i&&(f={frames:[{filename:i,lineno:s}]}),l={message:a,culprit:i,"sentry.interfaces.Stacktrace":f,"sentry.interfaces.Exception":{type:h,value:t},project:n.options.projectId,logger:n.options.logger,site:n.options.site},n.options.testMode||(l["sentry.interfaces.Http"]={url:p,querystring:d,headers:n.getHeaders()}),u=u||(new Date).getTime(),c=JSON.stringify(l),n.getSignature(c,u,function(e){var t=n.getAuthHeader(e,u);r.each(n.options.servers,function(e,n){r.ajax({type:"POST",url:n,data:c,headers:{"X-Sentry-Auth":t,Authentication:t}})})})}}.call(this);